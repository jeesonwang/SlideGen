from collections.abc import Callable, Sequence
from enum import Enum
from typing import Any

from fastapi import params
from fastapi.routing import *


def api_description(
    response_model: Any = Default(None),
    status_code: int | None = 200,
    tags: list[str | Enum] | None = None,
    dependencies: Sequence[params.Depends] | None = None,
    summary: str | None = None,
    description: str | None = None,
    response_description: str = "Successful Response",
    responses: dict[int | str, dict[str, Any]] | None = None,
    deprecated: bool | None = None,
    operation_id: str | None = None,
    response_model_include: IncEx | None = None,
    response_model_exclude: IncEx | None = None,
    response_model_by_alias: bool = True,
    response_model_exclude_unset: bool = False,
    response_model_exclude_defaults: bool = False,
    response_model_exclude_none: bool = False,
    include_in_schema: bool = True,
    response_class: type[Response] | DefaultPlaceholder = Default(JSONResponse),
    name: str | None = None,
    route_class_override: type[APIRoute] | None = None,
    callbacks: list[BaseRoute] | None = None,
    openapi_extra: dict[str, Any] | None = None,
    generate_unique_id_function: Callable[[APIRoute], str] | DefaultPlaceholder = Default(generate_unique_id),
) -> Callable[[Callable], Callable]:
    def wrapper(func: Callable) -> Callable:
        names = [
            ("response_model", response_model),
            ("status_code", status_code),
            ("tags", tags),
            ("dependencies", dependencies),
            ("summary", summary),
            ("description", description),
            ("response_description", response_description),
            ("responses", responses),
            ("deprecated", deprecated),
            ("operation_id", operation_id),
            ("response_model_include", response_model_include),
            ("response_model_exclude", response_model_exclude),
            ("response_model_by_alias", response_model_by_alias),
            ("response_model_exclude_unset", response_model_exclude_unset),
            ("response_model_exclude_defaults", response_model_exclude_defaults),
            ("response_model_exclude_none", response_model_exclude_none),
            ("include_in_schema", include_in_schema),
            ("response_class", response_class),
            ("name", name),
            ("route_class_override", route_class_override),
            ("callbacks", callbacks),
            ("openapi_extra", openapi_extra),
            ("generate_unique_id_function", generate_unique_id_function),
        ]
        params = {}
        for field, value in names:
            if value:
                params[field] = value
        func._extra_params = params
        return func

    return wrapper
